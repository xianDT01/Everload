
<div class="dashboard">
  <div class="dashboard-header">
    <h2 class="dashboard-title">{{ 'TITULO' | translate }}</h2>
    <a routerLink="/" class="btn return-home" aria-label="Volver al inicio">
  ðŸ”™ {{ 'HOME' | translate }}
</a>
    <div class="language-selector">
      <button (click)="changeLanguage('es')">ðŸ‡ªðŸ‡¸ <span>EspaÃ±ol</span></button>
      <button (click)="changeLanguage('en')">ðŸ‡¬ðŸ‡§ <span>English</span></button>
      <button (click)="changeLanguage('gl')">
        <img src="https://upload.wikimedia.org/wikipedia/commons/6/64/Flag_of_Galicia.svg" alt="Galicia" width="20">
        <span>Galego</span>
      </button>
    </div>
  </div>

  <div class="platform-buttons">
    <a routerLink="/youtube-downloads" class="platform youtube">
      <img src="/assets/youtube-icon-logo-719479.png" class="icon"> {{ 'YOUTUBE' | translate }}
    </a>
    <a routerLink="/twitter-downloads" class="platform twitter">
      <img src="/assets/twitter-icon.png" class="icon"> {{ 'TWITTER' | translate }}
    </a>
    <a routerLink="/facebook-downloads" class="platform facebook">
      <img src="/assets/fb sin fondo.png" class="icon"> {{ 'FACEBOOK' | translate }}
    </a>
    <a routerLink="/instagram-downloads" class="platform instagram">
      <img src="/assets/instagram-icon.png" class="icon"> {{ 'INSTAGRAM' | translate }}
    </a>
    <a routerLink="/spotify-downloads" class="platform spotify">
      <img src="/assets/Spotify.png" class="icon"> {{ 'SPOTIFY' | translate }}
    </a>
    <a routerLink="/tiktok-downloads" class="platform tiktok">
      <img src="/assets/tiktok_logo.png" class="icon"> {{ 'TIKTOK' | translate }}
    </a>
  </div>


  <form (ngSubmit)="guardarCambios()" *ngIf="config" class="form-grid">
    <label>{{ 'CLIENT_ID' | translate }}:</label>
    <input [(ngModel)]="config.clientId" name="clientId" required />

    <label>{{ 'CLIENT_SECRET' | translate }}:</label>
    <input [(ngModel)]="config.clientSecret" name="clientSecret" required />

    <label>{{ 'API_KEY' | translate }}:</label>
    <input [(ngModel)]="config.apiKey" name="apiKey" required />

    <button type="submit" class="btn primary" [disabled]="cargando">{{ 'GUARDAR' | translate }}</button>
  </form>

  <p *ngIf="mensaje" class="message">{{ mensaje }}</p>

  <div class="actions-row">
    <button (click)="actualizarYtDlp()" class="btn secondary" [disabled]="cargando">{{ 'ACTUALIZAR_YTDLP' | translate }}</button>
    <button (click)="limpiarTemporales()" class="btn warning">{{ 'LIMPIAR_TEMP' | translate }}</button>
    <button (click)="vaciarHistorial()" class="btn danger">{{ 'VACIAR_HIST' | translate }}</button>
    <button (click)="limpiarLog()" class="btn dark">{{ 'LIMPIAR_LOG' | translate }}</button>
  </div>

  <p>{{ mensajeLimpieza }}</p>
  <p>{{ mensajeVaciarHistorial }}</p>
  <p>{{ mensajeLogLimpio }}</p>

  <hr />
  <h3>{{ 'LOGS' | translate }}</h3>
  <div class="logs-section">
    <input [(ngModel)]="filtroLog" [placeholder]="'FILTRAR' | translate">
    <button class="btn small" (click)="cargarLogs()">{{ 'VER_LOGS' | translate }}</button>
  </div>

  <div #logContainer class="log-output">
    <div *ngFor="let l of logs">{{ l }}</div>
  </div>

  <hr />
  <h3>{{ 'HIST_DESCARGAS' | translate }}</h3>
  <div class="history-container">
    <table *ngIf="historial.length > 0" class="history-table">
      <thead>
        <tr>
          <th>{{ 'TITULO_TABLA' | translate }}</th>
          <th>{{ 'TIPO' | translate }}</th>
          <th>{{ 'PLATAFORMA' | translate }}</th>
          <th>{{ 'FECHA' | translate }}</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let item of historial">
          <td>{{ item.titulo }}</td>
          <td>{{ item.tipo }}</td>
          <td>
            <img [src]="getIconPath(item.plataforma)" class="icon-table" />
            {{ item.plataforma }}
          </td>
          <td>{{ item.fecha | date:'short' }}</td>
        </tr>
      </tbody>
    </table>
  </div>

  <h3>{{ 'ESTADO_APIS' | translate }}</h3>
  <div class="api-status">
    <button (click)="comprobarApis()" class="btn secondary">{{ 'COMPROBAR_ESTADO' | translate }}</button>
    <ul>
      <li><strong>YouTube:</strong> {{ apiEstados['youtube'] }}</li>
      <li><strong>Spotify:</strong> {{ apiEstados['spotify'] }}</li>
      <li><strong>TikTok:</strong> {{ apiEstados['tiktok'] }}</li>
      <li><strong>Facebook:</strong> {{ apiEstados['facebook'] }}</li>
      <li><strong>Instagram:</strong> {{ apiEstados['instagram'] }}</li>
    </ul>
  </div>
</div>